---
layout: post
title: Obfuscate your production-database
date: 2004-09-10 01:00:46 +02:00
categories: Coding Tools
---
<P>In order to catch errors as early as possible, you should have a set of test-data that resembles the data that you'll encounter in the production-environment as closely as possible. If you use a set of only 15 records to test something that will eventually contain thousands of records, you'll probably spend more time doing rework and bug-fixing than is necessary.</P>
<P>The best place to find relevant test-data is the production-database of similar systems that the company is running. Downside to this is the fact that organizations tend to be protective of this sort of data. </P>
<P>For testing purposes, the actual meaning that the data has, is not important. We're more interested in aspects like volume, distribution, special characters and so on.</P>
<P>To sort of obfuscate a set of data, I've created a small tool to remove the “meaning” of the data while still preserving other aspects. It randomly replaces characters in fields; but instead of just creating random characters, it replaces numeric characters with another numeric character, a vowel with another vowel and a consonant with another consonant.</P>
<P>When applied to authors-table in the pubs-database, this list: </P>
<P>409-56-7008 Bennet Abraham<BR>648-92-1872 Blotchet-Halls Reginald<BR>238-95-7766 Carson Cheryl<BR>722-51-5454 DeFrance Michel<BR>712-45-1867 del Castillo Innes<BR>427-17-2319 Dull Ann<BR>213-46-8915 Green Marjorie<BR>527-72-3246 Greene Morningstar<BR>472-27-2349 Gringlesby Burt<BR>846-92-7186 Hunter Sheryl<BR>756-30-7391 Karsen Livia<BR>486-29-1786 Locksley Charlene<BR>724-80-9391 MacFeather Stearns<BR>893-72-1158 McBadden Heather<BR>267-41-2394 O'Leary Michael<BR>807-91-6654 Panteley Sylvia<BR>998-72-3567 Ringer Albert<BR>899-46-2035 Ringer Anne<BR>341-22-1782 Smith Meander<BR>274-80-9391 Straight Dean<BR>724-08-9931 Stringer Dirk<BR>172-32-1176 White Johnson<BR>672-71-3249 Yokomoto Akiko<BR><BR>.. is changed into:</P>
<P>409-56-7008 Binnet Abrehin<BR>648-92-1872 Ggitched-Kuysq Xugifast<BR>238-95-7766 Zusbib Rgezym<BR>722-51-5454 DeHzujre Mogzem<BR>712-45-1867 sel Cesforvi Amsej<BR>427-17-2319 Nuvq Adm<BR>213-46-8915 Vreax Cuppevie<BR>527-72-3246 Gpeome Meryegfknax<BR>472-27-2349 Mbofhmospy Godt<BR>846-92-7186 Podnef Sserhl<BR>756-30-7391 Zawsan Covaa<BR>486-29-1786 Diykxzeh Zhilloza<BR>724-80-9391 MevViithed Wkoermx<BR>893-72-1158 MdBibqun Houmhar<BR>267-41-2394 E'Loirf Wowdeul<BR>807-91-6654 Pinmaney Xylvia<BR>998-72-3567 Rowrer Albirx<BR>899-46-2035 Tekgun Ahnu<BR>341-22-1782 Mmith Deokric<BR>274-80-9391 Stweungt Muan<BR>724-08-9931 Ptsiggis Ximk<BR>172-32-1176 Whibi Joxnsow<BR>672-71-3249 Wobucoba Aqola</P>
<P>The text is still legible but it is <STRIKE>impossible</STRIKE> hard to relate it to the source. It is possible to control how different the result is from the orignal by controlling the “opacity”. By replacing only a percentage of the characters, the original values are blended with the random data.</P><PRE>  private char GetRandomCharacter(char CharacterIn, int Opacity)<BR>  {</PRE><PRE>   int SkipCharacterDraw = randomGenerator.Next(101);</PRE><PRE>   if (SkipCharacterDraw > Opacity)<BR>   {<BR>    foreach(ArrayList alCharSet in CharSets)<BR>    {<BR>     if(alCharSet.IndexOf(CharacterIn) >= 0)<BR>     {<BR>      int positie = randomGenerator.Next(alCharSet.Count);</PRE><PRE>      return (char)alCharSet[positie];<BR>     }</PRE><PRE>    }</PRE><PRE>   }<BR>   <BR>   return CharacterIn;<BR>  }</PRE>
<P> Drop me an email if you want to receive the entire project.</P>
